<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>async关键字</title>
</head>

<body>
  async 是 ES8 引入的一个关键字，用于 声明一个函数 为 异步函数，该 函数的执行
  返回的结果 是 一个 Promise 对象。

  <script>

    // 普通的函数
    function fn() { }

    // async函数   特殊的是 返回值 是一个 Promise 对象
    async function fn() {

      // 此时 返回的结果 不管是 字符串 、数组 、null 、undefined，
      // 只要返回的结果 不是一个Promise类型的对象 时，则返回的结果 就是一个 成功的 Promise对象

      // 返回一个字符串  , 则返回的结果就是一个 成功的 Promise对象
      return "今晚打老虎";

      // 返回的结果 不是一个Promise类型对象时，则返回的结果就是一个 成功的Promise对象
      return;

      // 抛出错误   此时 返回的结果是一个失败的 Promise对象
      throw new Error("出错了");

      // 当返回的结果是一个 Promise对象
      return new Promise((resolve, reject) => {

        // resolve('成功的数据');
        reject("失败的错误");

      });
    }

    const result = fn();

    result.then(value => {
      console.log(value);
    }, reason => {
      console.warn(reason);
    }
    );

  </script>

  <script>
    async function fn1() {
      // 返回一个字符串
      // return '今晚打老虎';

      // 返回的结果 不是一个Promise类型的对象，返回的结果 就是 成功 Promise对象
      // return;

      // 抛出错误，返回的结果 是一个 失败的 Promise
      // throw new Error('出错了！')

      // 返回的结果 如果 是一个 Promise 对象       （通常）
      return new Promise((resolve, reject) => {
        // resolve('成功的数据')

        reject("失败的数据");
      });
    }

    const result2 = fn1();

    // console.log(result);

    result2.then(
      (value) => {
        console.log(value);
      },
      (reason) => {
        console.warn(reason);
      }
    );
  </script>
</body>

</html>